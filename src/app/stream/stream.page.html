<ion-header>
  <ion-toolbar>
    <ion-title>Music Player</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-searchbar [(ngModel)]="searchQuery"></ion-searchbar>

  <ion-buttons class="ion-justify-content-center">
    <ion-button (click)="searchDeezerTracks()">Tracks</ion-button>
    <ion-button (click)="searchDeezerArtists()">Artists</ion-button>
    <ion-button (click)="searchDeezerAlbums()">Albums</ion-button>
  </ion-buttons>

  <ion-button expand="block" color="primary" (click)="loadCharts()">Show Deezer Charts</ion-button>
  <ion-button expand="block" color="primary" (click)="loadRadios()">Show Deezer Radios</ion-button>

  <!-- Display Tracks --> 
  <ion-list *ngIf="deezerTracks.length > 0">
    <ion-list-header>Tracks</ion-list-header>
    <ion-item *ngFor="let track of deezerTracks">
      <ion-label>
        <h2>{{ track.title }}</h2>
        <p>{{ track.artist.name }}</p>
      </ion-label>
      <ion-button *ngIf="track.preview" (click)="playPreview(track.preview)">
        <ion-icon name="play"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-list>

  <!-- Display Artists -->
  <ion-list *ngIf="deezerArtists.length > 0">
    <ion-list-header>Artists</ion-list-header>
    <ion-item *ngFor="let artist of deezerArtists">
      <ion-thumbnail slot="start">
        <img [src]="artist.picture_small" alt="Artist" />
      </ion-thumbnail>
      <ion-label>
        <h2>{{ artist.name }}</h2>
      </ion-label>
    </ion-item>
  </ion-list>

  <!-- Display Albums -->
  <ion-list *ngIf="deezerAlbums.length > 0">
    <ion-list-header>Albums</ion-list-header>
    <ion-item *ngFor="let album of deezerAlbums">
      <ion-thumbnail slot="start">
        <img [src]="album.cover_small" alt="Album cover" />
      </ion-thumbnail>
      <ion-label>
        <h2>{{ album.title }}</h2>
        <p>{{ album.artist.name }}</p>
      </ion-label>
    </ion-item>
  </ion-list>

  <!-- Display Deezer Charts -->
  <ion-list *ngIf="deezerCharts?.tracks?.data?.length">
    <ion-list-header>Top Chart Tracks</ion-list-header>
    <ion-item *ngFor="let track of deezerCharts.tracks.data">
      <ion-label>
        <h2>{{ track.title }}</h2>
        <p>{{ track.artist.name }}</p>
      </ion-label>
      <ion-button *ngIf="track.preview" (click)="playPreview(track.preview)">
        <ion-icon name="play"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-list>

  <!-- Display Deezer Radios -->
  <ion-list *ngIf="deezerRadios?.data?.length">
    <ion-list-header>Radios</ion-list-header>
    <ion-item *ngFor="let radio of deezerRadios.data">
      <ion-thumbnail slot="start">
        <img [src]="radio.picture_small || radio.picture" alt="Radio" />
      </ion-thumbnail>
      <ion-label>
        <h2>{{ radio.title }}</h2>
        <p>{{ radio.description }}</p>
      </ion-label>
      <ion-button (click)="loadRadioTracks(radio.id)">Show Songs</ion-button>
    </ion-item>
  </ion-list>

  <!-- Display Tracks for Selected Radio -->
  <div *ngIf="selectedRadioTracks.length > 0">
    <h3>Radio Songs</h3>
    <ion-list>
      <ion-item *ngFor="let track of selectedRadioTracks">
        <ion-label>
          {{ track.title }} - {{ track.artist?.name }}
        </ion-label>
        <ion-button fill="clear" (click)="playPreview(track.preview)">
          ▶️
        </ion-button>
      </ion-item>
    </ion-list>
  </div>

</ion-content>
